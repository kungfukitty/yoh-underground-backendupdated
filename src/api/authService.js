import { create } from 'zustand';import { api } from './apiClient';const useAuth=create((set,get)=>({token:localStorage.getItem('yoh_token')||null,user:null,loading:false,async bootstrap(){const {token}=get();if(!token) return;try{const me=await api.me(token);set({user:me.payload})}catch{set({token:null,user:null});localStorage.removeItem('yoh_token')}},async login(email,password){set({loading:true});try{const data=await api.login(email,password);localStorage.setItem('yoh_token',data.token);set({token:data.token,user:data.user||null,loading:false});return true}catch(e){set({loading:false});throw e}},logout(){localStorage.removeItem('yoh_token');set({token:null,user:null})}}));export default useAuth;