import React,{useEffect,useState} from 'react';import useAuth from '../../hooks/useAuth';import { api } from '../../api/apiClient';function ItineraryTimeline({items=[]}){return(<div className='space-y-4'>{items.map((it,i)=>(<div key={i} className='card p-4'><div className='text-sm text-gray-500'>Day {it.day}</div><div className='font-medium'>{it.title}</div><div className='text-sm text-gray-600'>{it.details}</div></div>))}</div>)}export default function Dashboard(){const { token, user }=useAuth();const [profile,setProfile]=useState(null);const [itineraries,setItineraries]=useState([]);const [payments,setPayments]=useState([]);useEffect(()=>{async function load(){const p=await api.myProfile(token);setProfile(p);const its=await api.myItineraries(token);setItineraries(its.items||[]);const pays=await api.myPayments(token);setPayments(pays.items||[])}load().catch(()=>{})},[token]);return(<div className='max-w-5xl mx-auto p-6 space-y-8'><div className='flex items-center justify-between'><h1 className='text-2xl font-semibold'>Welcome{user?.name?`, ${user.name}`:''}</h1></div><section className='grid md:grid-cols-3 gap-6'><div className='card p-4'><div className='text-xs'>Profile</div><div className='mt-2 text-sm'>{profile?.email}</div><div className='text-sm text-gray-600'>{profile?.membership?.tier||'Member'}</div></div><div className='card p-4'><div className='text-xs'>Payment Status</div><div className='mt-2 text-sm'>{payments[0]?.status||'Pending / N/A'}</div></div><div className='card p-4'><div className='text-xs'>Next Trip</div><div className='mt-2 text-sm'>{itineraries[0]?.title||'TBD'}</div></div></section><section><h2 className='text-lg font-semibold mb-3'>Itinerary</h2><ItineraryTimeline items={itineraries[0]?.steps||[]} /></section><section><h2 className='text-lg font-semibold mb-3'>Receipts</h2><div className='space-y-2'>{payments.map((p,i)=>(<div key={i} className='card p-4 flex items-center justify-between'><div><div className='font-medium'>{p.description||'Payment'}</div><div className='text-sm text-gray-600'>{p.amount} {p.currency} â€¢ {p.status}</div></div>{p.receiptUrl&&<a href={p.receiptUrl} className='btn' target='_blank'>Receipt</a>}</div>))}{payments.length===0&&<div className='text-sm text-gray-600'>No payments yet.</div>}</div></section></div>) }